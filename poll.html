  
 <!DOCTYPE html>
<html >

<head>
  <meta charset='UTF-8'>
   <title></title>
   
 
   <link rel='stylesheet' type='text/css' href='https://votingapp-isrmm.herokuapp.com/styles.css'>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">

</head>

<body translate='no' >

<script src='https://fb.me/react-0.14.3.js'></script>
<script src='https://fb.me/react-dom-0.14.3.js'></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js'></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

	<div class="navbar">
<div id="btnsnav">
<div class="btnnav" id="mypolls"><a href="https://votingapp-isrmm.herokuapp.com/mypoll">My polls</a></div>
<div class="btnnav" id="newpoll"><a href="https://votingapp-isrmm.herokuapp.com/newpoll">New poll</a></div>
<div class="btnnav" id="home"><a href="https://votingapp-isrmm.herokuapp.com/">Home</a></div>
	<script src="https://localhost:3000/jsonfunctions.js"></script>

</div>
  <button class="btn btn-primary" id="sign-in-with-twitter"></button>
  </div>
	
	
	
<div class='page'>

 <div id="sel"></div>
 <button onclick="send()">Submit</button>
	<button id = "tweet" class = "btn btn-primary" onclick="tweet()">
        tweet
      </button>


 <div id="piechart"></div>
  </div>



<script type="text/babel" >
var jsonuser=getCookie("user");
var jsonobj=JSON.parse(getCookie("json"));



document.title=jsonobj.title;

google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
var array=[];
array.push(["option","freq"]);
for(var i=0;i<jsonobj.chart.length;i++){
var ar=[];
ar.push(jsonobj.chart[i].option);
ar.push(jsonobj.chart[i].freq);

	array.push(ar);
}
console.log(array);
  var data = google.visualization.arrayToDataTable(array);
  var options = {'title':"",'width':900, 'height':700,'backgroundColor': 'transparent'};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
}

var Select = React.createClass({
 
 getInitialState: function () {
    return {
      disp:"none"
	  
	  };
	 },
 
 handleChange: function (event) {


     if(event.target.value=="ownop"){
	 	this.setState({ disp: "block" });
	 }else{
	 	this.setState({ disp: "none" });
	 }
    
    
  },
  
  render: function () {
  
          return (
          <div>
		  <h2>{jsonobj.title}</h2>
		  <h2 style={{fontSize: "14px"}}><b>I'd like to vote for...:</b></h2>
		  <select id="selec"  onChange={this.handleChange}>
	{jsonobj.chart.map(function(item) {

          return (<option value={item.option}>{item.option}</option>)
		  
		  })}
		  
		  {() => {
		  if(jsonuser!=="undefined"){
		      return <option value={"ownop"}>{"I'd like to vote for...: "}</option>
			  }
		  }()}
		  
		  </select>
		  <label style={{display: this.state.disp}}>Vote with my own option: 
</label>
<input type="text" style={{display: this.state.disp}} id="ownop"/>
	</div>
		
		)

}
  
});

ReactDOM.render(<Select/>, document.getElementById('sel'));

</script>


</body>
</html>
